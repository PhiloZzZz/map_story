<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…¨çƒä¸»è¦ç«ç®­ç³»åˆ—å‘å°„æ¬¡æ•°åŠ¨æ€æ’åºå›¾ (2016-2023)</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        body, html {
            margin: 0;
            padding: 20px;
            background-color: #12171f;
            color: #fff;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            height: 100%;
        }
        #main {
            width: 100%;
            height: 700px;
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(0, 150, 255, 0.2);
            background: linear-gradient(145deg, #0a1525, #14213d);
            border: 1px solid rgba(64, 158, 255, 0.1);
        }
        .title {
            text-align: center;
            margin-bottom: 10px;
            color: #fff;
            font-size: 28px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(64, 158, 255, 0.5);
        }
        .subtitle {
            text-align: center;
            color: #a0c8ff;
            margin-bottom: 20px;
            font-size: 16px;
        }
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        button {
            padding: 8px 16px;
            background: rgba(64, 158, 255, 0.15);
            border: 1px solid rgba(64, 158, 255, 0.3);
            color: #a0c8ff;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }
        button:hover {
            background: rgba(64, 158, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 100, 255, 0.2);
        }
        button.active {
            background: rgba(255, 215, 0, 0.3);
            border-color: #ffd700;
            color: #ffd700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
        }
        .legend-info {
            text-align: center;
            color: #88c1ff;
            margin-top: 10px;
            font-size: 14px;
        }
        .champion-box {
            position: absolute;
            top: 40px;
            right: 20px;
            width: 220px;
            padding: 15px;
            border-radius: 10px;
            background: linear-gradient(135deg, #ffffff 0%, #ffd700 100%);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            border: 2px solid #ffd700;
            z-index: 10;
            animation: pulse 2s infinite;
        }
        .champion-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }
        .champion-name {
            font-size: 18px;
            font-weight: bold;
            color: #d40000;
            text-shadow: 0 0 5px rgba(255, 215, 0, 0.5);
        }
        .champion-count {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-top: 5px;
        }
        .champion-year {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.5); }
            50% { box-shadow: 0 0 30px rgba(255, 215, 0, 0.8); }
            100% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.5); }
        }
    </style>
</head>
<body>
    <div class="title">å…¨çƒä¸»è¦ç«ç®­ç³»åˆ—å‘å°„æ¬¡æ•°åŠ¨æ€æ’åºå›¾ (2016-2023)</div>
    <div class="subtitle">æ•°æ®æ¥æºï¼šå„å›½èˆªå¤©æœºæ„å…¬å¼€æ•°æ® | å•ä½ï¼šå‘å°„æ¬¡æ•°</div>
    
    <div class="controls">
        <button id="playBtn" class="active">â¸ æš‚åœ</button>
        <button id="resetBtn">â†º é‡ç½®</button>
        <button id="speedSlow">æ…¢é€Ÿ</button>
        <button id="speedNormal" class="active">æ­£å¸¸</button>
        <button id="speedFast">å¿«é€Ÿ</button>
    </div>
    
    <div id="main"></div>
    <div class="legend-info">* äº®é»„è‰²é«˜äº®çº¿æ¡ä¸ºä¸­å›½é•¿å¾ç³»åˆ—ç«ç®­æ•°æ®</div>

    <script>
        // é‡æ„æ•°æ®æ ¼å¼ - æŒ‰å¹´ä»½ç»„ç»‡
        const yearlyData = {};
        const allYears = [2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023];
        const allCountries = [
            'ä¸­å›½ï¼ˆé•¿å¾ç³»åˆ—ï¼‰',
            'ç¾å›½ï¼ˆçŒé¹°ç³»åˆ—ï¼‰', 
            'ä¿„ç½—æ–¯ï¼ˆè”ç›Ÿå·2ç³»åˆ—ï¼‰',
            'æ–°è¥¿å…°ï¼ˆç”µå­å·ï¼‰',
            'ç¾å›½ï¼ˆå®‡å®™ç¥5ç³»åˆ—ï¼‰',
            'æ¬§æ´²ï¼ˆé˜¿é‡Œå®‰5ç³»åˆ—ï¼‰'
        ];

        // åˆå§‹åŒ–æ•°æ®ç»“æ„
        allYears.forEach(year => {
            yearlyData[year] = {};
            allCountries.forEach(country => {
                yearlyData[year][country] = 0;
            });
        });

        // å¡«å……æ•°æ®
        const rawData = [
            [2016, 'ä¸­å›½ï¼ˆé•¿å¾ç³»åˆ—ï¼‰', 22],
            [2017, 'ä¸­å›½ï¼ˆé•¿å¾ç³»åˆ—ï¼‰', 16],
            [2018, 'ä¸­å›½ï¼ˆé•¿å¾ç³»åˆ—ï¼‰', 37],
            [2019, 'ä¸­å›½ï¼ˆé•¿å¾ç³»åˆ—ï¼‰', 26],
            [2020, 'ä¸­å›½ï¼ˆé•¿å¾ç³»åˆ—ï¼‰', 34],
            [2021, 'ä¸­å›½ï¼ˆé•¿å¾ç³»åˆ—ï¼‰', 49],
            [2022, 'ä¸­å›½ï¼ˆé•¿å¾ç³»åˆ—ï¼‰', 53],
            [2023, 'ä¸­å›½ï¼ˆé•¿å¾ç³»åˆ—ï¼‰', 47],

            [2016, 'ç¾å›½ï¼ˆçŒé¹°ç³»åˆ—ï¼‰', 9],
            [2017, 'ç¾å›½ï¼ˆçŒé¹°ç³»åˆ—ï¼‰', 18],
            [2018, 'ç¾å›½ï¼ˆçŒé¹°ç³»åˆ—ï¼‰', 21],
            [2019, 'ç¾å›½ï¼ˆçŒé¹°ç³»åˆ—ï¼‰', 13],
            [2020, 'ç¾å›½ï¼ˆçŒé¹°ç³»åˆ—ï¼‰', 25],
            [2021, 'ç¾å›½ï¼ˆçŒé¹°ç³»åˆ—ï¼‰', 31],
            [2022, 'ç¾å›½ï¼ˆçŒé¹°ç³»åˆ—ï¼‰', 61],
            [2023, 'ç¾å›½ï¼ˆçŒé¹°ç³»åˆ—ï¼‰', 96],

            [2016, 'ä¿„ç½—æ–¯ï¼ˆè”ç›Ÿå·2ç³»åˆ—ï¼‰', 8],
            [2017, 'ä¿„ç½—æ–¯ï¼ˆè”ç›Ÿå·2ç³»åˆ—ï¼‰', 10],
            [2018, 'ä¿„ç½—æ–¯ï¼ˆè”ç›Ÿå·2ç³»åˆ—ï¼‰', 11],
            [2019, 'ä¿„ç½—æ–¯ï¼ˆè”ç›Ÿå·2ç³»åˆ—ï¼‰', 15],
            [2020, 'ä¿„ç½—æ–¯ï¼ˆè”ç›Ÿå·2ç³»åˆ—ï¼‰', 15],
            [2021, 'ä¿„ç½—æ–¯ï¼ˆè”ç›Ÿå·2ç³»åˆ—ï¼‰', 22],
            [2022, 'ä¿„ç½—æ–¯ï¼ˆè”ç›Ÿå·2ç³»åˆ—ï¼‰', 19],
            [2023, 'ä¿„ç½—æ–¯ï¼ˆè”ç›Ÿå·2ç³»åˆ—ï¼‰', 17],

            [2016, 'æ–°è¥¿å…°ï¼ˆç”µå­å·ï¼‰', 0],
            [2017, 'æ–°è¥¿å…°ï¼ˆç”µå­å·ï¼‰', 1],
            [2018, 'æ–°è¥¿å…°ï¼ˆç”µå­å·ï¼‰', 3],
            [2019, 'æ–°è¥¿å…°ï¼ˆç”µå­å·ï¼‰', 6],
            [2020, 'æ–°è¥¿å…°ï¼ˆç”µå­å·ï¼‰', 7],
            [2021, 'æ–°è¥¿å…°ï¼ˆç”µå­å·ï¼‰', 6],
            [2022, 'æ–°è¥¿å…°ï¼ˆç”µå­å·ï¼‰', 9],
            [2023, 'æ–°è¥¿å…°ï¼ˆç”µå­å·ï¼‰', 9],

            [2016, 'ç¾å›½ï¼ˆå®‡å®™ç¥5ç³»åˆ—ï¼‰', 8],
            [2017, 'ç¾å›½ï¼ˆå®‡å®™ç¥5ç³»åˆ—ï¼‰', 6],
            [2018, 'ç¾å›½ï¼ˆå®‡å®™ç¥5ç³»åˆ—ï¼‰', 5],
            [2019, 'ç¾å›½ï¼ˆå®‡å®™ç¥5ç³»åˆ—ï¼‰', 2],
            [2020, 'ç¾å›½ï¼ˆå®‡å®™ç¥5ç³»åˆ—ï¼‰', 5],
            [2021, 'ç¾å›½ï¼ˆå®‡å®™ç¥5ç³»åˆ—ï¼‰', 4],
            [2022, 'ç¾å›½ï¼ˆå®‡å®™ç¥5ç³»åˆ—ï¼‰', 7],
            [2023, 'ç¾å›½ï¼ˆå®‡å®™ç¥5ç³»åˆ—ï¼‰', 2],

            [2016, 'æ¬§æ´²ï¼ˆé˜¿é‡Œå®‰5ç³»åˆ—ï¼‰', 7],
            [2017, 'æ¬§æ´²ï¼ˆé˜¿é‡Œå®‰5ç³»åˆ—ï¼‰', 6],
            [2018, 'æ¬§æ´²ï¼ˆé˜¿é‡Œå®‰5ç³»åˆ—ï¼‰', 6],
            [2019, 'æ¬§æ´²ï¼ˆé˜¿é‡Œå®‰5ç³»åˆ—ï¼‰', 4],
            [2020, 'æ¬§æ´²ï¼ˆé˜¿é‡Œå®‰5ç³»åˆ—ï¼‰', 3],
            [2021, 'æ¬§æ´²ï¼ˆé˜¿é‡Œå®‰5ç³»åˆ—ï¼‰', 3],
            [2022, 'æ¬§æ´²ï¼ˆé˜¿é‡Œå®‰5ç³»åˆ—ï¼‰', 3],
            [2023, 'æ¬§æ´²ï¼ˆé˜¿é‡Œå®‰5ç³»åˆ—ï¼‰', 2]
        ];

        rawData.forEach(item => {
            const [year, country, launches] = item;
            yearlyData[year][country] = launches;
        });

        // é¢œè‰²é…ç½®
        const colorMap = {
            'ä¸­å›½ï¼ˆé•¿å¾ç³»åˆ—ï¼‰': '#FFD700',  // äº®é»„è‰²
            'ç¾å›½ï¼ˆçŒé¹°ç³»åˆ—ï¼‰': '#64B5F6',  // æµ…è“è‰²
            'ä¿„ç½—æ–¯ï¼ˆè”ç›Ÿå·2ç³»åˆ—ï¼‰': '#81C784',  // æµ…ç»¿è‰²
            'æ–°è¥¿å…°ï¼ˆç”µå­å·ï¼‰': '#FFB74D',  // æµ…æ©™è‰²
            'ç¾å›½ï¼ˆå®‡å®™ç¥5ç³»åˆ—ï¼‰': '#BA68C8',  // æµ…ç´«è‰²
            'æ¬§æ´²ï¼ˆé˜¿é‡Œå®‰5ç³»åˆ—ï¼‰': '#4DB6AC'   // æµ…é’è‰²
        };

        // åˆå§‹åŒ–å›¾è¡¨
        const chartDom = document.getElementById('main');
        const myChart = echarts.init(chartDom);

        // åˆ›å»ºå† å†›å±•ç¤ºæ¡†
        function createChampionBox(year) {
            // ç§»é™¤æ—§çš„å† å†›æ¡†
            const oldBox = document.querySelector('.champion-box');
            if (oldBox) oldBox.remove();
            
            // è®¡ç®—å½“å¹´å† å†›
            let champion = '';
            let maxLaunches = 0;
            
            allCountries.forEach(country => {
                const launches = yearlyData[year][country];
                if (launches > maxLaunches) {
                    maxLaunches = launches;
                    champion = country;
                }
            });
            
            // åˆ›å»ºå† å†›æ¡†
            const championBox = document.createElement('div');
            championBox.className = 'champion-box';
            championBox.innerHTML = `
                <div class="champion-title">
                    <span>ğŸ†</span>
                    <span>å¹´åº¦å‘å°„å† å†›</span>
                </div>
                <div class="champion-name">${champion}</div>
                <div class="champion-count">${maxLaunches} æ¬¡</div>
                <div class="champion-year">${year} å¹´</div>
            `;
            
            // æ·»åŠ åˆ°å›¾è¡¨å®¹å™¨
            chartDom.parentNode.appendChild(championBox);
        }

        // åˆ›å»ºç³»åˆ—æ•°æ®
        function createSeriesData(currentYear) {
            const seriesData = [];
            
            allCountries.forEach(country => {
                const isChina = country === 'ä¸­å›½ï¼ˆé•¿å¾ç³»åˆ—ï¼‰';
                const data = [];
                
                // ä¸ºæ¯ä¸ªå¹´ä»½åˆ›å»ºæ•°æ®ç‚¹
                for (let year = 2016; year <= currentYear; year++) {
                    data.push({
                        name: year.toString(),
                        value: [year.toString(), yearlyData[year][country]]
                    });
                }
                
                seriesData.push({
                    name: country,
                    type: 'line',
                    data: data,
                    showSymbol: true,
                    symbolSize: 6,
                    // æ·»åŠ åŠ¨ç”»é…ç½® - å®ç°å¹³æ»‘å»¶ä¼¸
                    animation: true,
                    animationDuration: 1000,
                    animationEasing: 'cubicOut',
                    animationDelay: function(idx) {
                        return idx * 100;
                    },
                    endLabel: {
                        show: true,
                        formatter: function (params) {
                            return params.value[1];
                        },
                        color: colorMap[country] || '#fff',
                        fontSize: 14,
                        fontWeight: 'bold'
                    },
                    lineStyle: {
                        width: isChina ? 4 : 2,
                        shadowBlur: isChina ? 10 : 0,
                        shadowColor: isChina ? 'rgba(255, 215, 0, 0.6)' : 'transparent'
                    },
                    itemStyle: {
                        color: colorMap[country] || '#fff'
                    },
                    emphasis: {
                        lineStyle: {
                            width: isChina ? 6 : 4,
                            shadowBlur: isChina ? 15 : 8
                        }
                    }
                });
            });
            
            return seriesData;
        }

        // åˆ›å»ºåŸºç¡€é…ç½®
        const baseOption = {
            animation: true,
            animationDuration: 1000,
            animationEasing: 'cubicOut',
            animationDelay: 0,
            title: {
                text: 'å…¨çƒä¸»è¦ç«ç®­ç³»åˆ—å‘å°„æ¬¡æ•°åŠ¨æ€æ’åºå›¾ - 2016å¹´',
                left: 'center',
                textStyle: {
                    color: '#fff',
                    fontSize: 24,
                    fontWeight: 'bold'
                }
            },
            tooltip: {
                trigger: 'axis',
                order: 'valueDesc',
                backgroundColor: 'rgba(18, 23, 31, 0.9)',
                borderColor: 'rgba(64, 158, 255, 0.3)',
                textStyle: {
                    color: '#fff'
                },
                formatter: function (params) {
                    const year = params[0].axisValue;
                    let result = `<div style="margin-bottom:5px;font-weight:bold">${year}å¹´</div>`;
                    
                    // æŒ‰å€¼æ’åº
                    params.sort((a, b) => b.value[1] - a.value[1]);
                    
                    params.forEach(param => {
                        const color = colorMap[param.seriesName] || '#fff';
                        result += `
                            <div style="display:flex;align-items:center;margin:2px 0;">
                                <span style="display:inline-block;width:10px;height:10px;border-radius:50%;background:${color};margin-right:8px"></span>
                                <span>${param.seriesName}: </span>
                                <span style="font-weight:bold;margin-left:5px;color:${color}">${param.value[1]}æ¬¡</span>
                            </div>
                        `;
                    });
                    return result;
                }
            },
            legend: {
                data: allCountries,
                top: 40,
                textStyle: {
                    color: '#a0c8ff'
                },
                itemWidth: 12,
                itemHeight: 12,
                itemGap: 20
            },
            xAxis: {
                type: 'category',
                name: 'å¹´ä»½',
                nameLocation: 'middle',
                nameGap: 30,
                data: allYears,
                nameTextStyle: {
                    color: '#a0c8ff',
                    fontSize: 14
                },
                axisLine: {
                    lineStyle: {
                        color: 'rgba(160, 200, 255, 0.3)'
                    }
                },
                axisLabel: {
                    color: '#a0c8ff',
                    fontSize: 12
                }
            },
            yAxis: {
                type: 'value',
                name: 'å‘å°„æ¬¡æ•°',
                nameTextStyle: {
                    color: '#a0c8ff',
                    fontSize: 14
                },
                axisLine: {
                    lineStyle: {
                        color: 'rgba(160, 200, 255, 0.3)'
                    }
                },
                axisLabel: {
                    color: '#a0c8ff',
                    fontSize: 12
                },
                splitLine: {
                    lineStyle: {
                        color: 'rgba(160, 200, 255, 0.1)',
                        type: 'dashed'
                    }
                }
            },
            grid: {
                left: 80,
                right: 250, // å¢åŠ å³è¾¹è·ï¼Œä¸ºå† å†›æ¡†ç•™å‡ºç©ºé—´
                top: 100,
                bottom: 50
            }
        };

        // åˆå§‹è®¾ç½®
        let currentYear = 2016;
        let animationInterval = null;
        let animationSpeed = 1000;
        let isPlaying = true;

        // æ›´æ–°å›¾è¡¨å‡½æ•°
        function updateChart(year) {
            currentYear = year;
            
            const updatedOption = {
                title: {
                    text: `å…¨çƒä¸»è¦ç«ç®­ç³»åˆ—å‘å°„æ¬¡æ•°åŠ¨æ€æ’åºå›¾ - ${year}å¹´`
                },
                series: createSeriesData(year)
            };
            
            myChart.setOption(updatedOption);
            
            // æ›´æ–°å† å†›å±•ç¤ºæ¡†
            createChampionBox(year);
        }

        // å¼€å§‹åŠ¨ç”»
        function startAnimation() {
            if (animationInterval) clearInterval(animationInterval);
            
            animationInterval = setInterval(() => {
                let nextYear = currentYear + 1;
                if (nextYear > 2023) {
                    nextYear = 2016;
                }
                updateChart(nextYear);
            }, animationSpeed);
            
            isPlaying = true;
            document.getElementById('playBtn').textContent = 'â¸ æš‚åœ';
            document.getElementById('playBtn').classList.add('active');
        }

        // åœæ­¢åŠ¨ç”»
        function stopAnimation() {
            if (animationInterval) {
                clearInterval(animationInterval);
                animationInterval = null;
                isPlaying = false;
                document.getElementById('playBtn').textContent = 'â–¶ æ’­æ”¾';
                document.getElementById('playBtn').classList.remove('active');
            }
        }

        // åˆ‡æ¢æ’­æ”¾/æš‚åœ
        function toggleAnimation() {
            if (isPlaying) {
                stopAnimation();
            } else {
                startAnimation();
            }
        }

        // é‡ç½®åŠ¨ç”»
        function resetAnimation() {
            stopAnimation();
            currentYear = 2016;
            updateChart(currentYear);
            startAnimation();
        }

        // è®¾ç½®åŠ¨ç”»é€Ÿåº¦
        function setAnimationSpeed(speed) {
            animationSpeed = speed;
            if (isPlaying) {
                stopAnimation();
                startAnimation();
            }
        }

        // åˆå§‹åŒ–å›¾è¡¨
        myChart.setOption({
            ...baseOption,
            series: createSeriesData(currentYear)
        });

        // åˆå§‹åŒ–å† å†›å±•ç¤ºæ¡†
        createChampionBox(currentYear);

        // æŒ‰é’®äº‹ä»¶ç›‘å¬
        document.getElementById('playBtn').addEventListener('click', toggleAnimation);
        
        document.getElementById('resetBtn').addEventListener('click', function() {
            resetAnimation();
        });

        document.getElementById('speedSlow').addEventListener('click', function() {
            setAnimationSpeed(1500);
            updateSpeedButtons(this);
        });

        document.getElementById('speedNormal').addEventListener('click', function() {
            setAnimationSpeed(1000);
            updateSpeedButtons(this);
        });

        document.getElementById('speedFast').addEventListener('click', function() {
            setAnimationSpeed(500);
            updateSpeedButtons(this);
        });

        // æ›´æ–°é€Ÿåº¦æŒ‰é’®çŠ¶æ€
        function updateSpeedButtons(activeButton) {
            document.querySelectorAll('[id^="speed"]').forEach(btn => {
                btn.classList.remove('active');
            });
            activeButton.classList.add('active');
        }

        // åˆå§‹å¯åŠ¨åŠ¨ç”»
        startAnimation();

        // å“åº”å¼è°ƒæ•´
        window.addEventListener('resize', function() {
            myChart.resize();
        });
    </script>
</body>
</html>